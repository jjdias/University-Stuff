<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>Relatorio Tp 1</title></head><body><article class="markdown-body"><p><img alt="logoise" src="/home/dias/Documents/facu/SMA" title="Relatorios/logoise.png &quot;logoise&quot;" /></p>
<h1 id="universidade-do-algarve"><a name="user-content-universidade-do-algarve" href="#universidade-do-algarve" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>UNIVERSIDADE DO ALGARVE</h1>
<h2 id="1st-assignement-web-crawler"><a name="user-content-1st-assignement-web-crawler" href="#1st-assignement-web-crawler" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>1st Assignement – Web crawler</h2>
<h4 id="julio-jacobsen-dias"><em>Julio Jacobsen Dias</em></h4>
<p>Relatório do Trabalho Prático nº 1 de Multi-Agent Sistems<br />
Mestrado em Engenharia Elétrica e Eletrônica</p>
<p>Trabalho efetuado sob a coordenação de:<br />
<em><strong>Professor Doutor Pedro Cardoso</strong></em></p>
<p>2017</p>
<p>por fazer:<br />
algoritmo ou fluxograma<br />
testes de cpu, memoria e tempo</p>
<hr />
<h5 id="tabela-de-conteudos"><a name="user-content-tabela-de-conteudos" href="#tabela-de-conteudos" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tabela de conteúdos</h5>
<ul>
<li>Introdução</li>
<li>Livrarias</li>
<li>Diagrama</li>
<li>O Código</li>
<li>Resultados</li>
<li>Considerações finais e trabalhos Futuros</li>
<li>Bibliografia</li>
<li>Código integro</li>
</ul>
<hr />
<h2 id="introducao"><a name="user-content-introducao" href="#introducao" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Introdução</h2>
<p>_ A Web crawler, sometimes called a spider, is an Internet bot that systematically browses the World Wide Web, typically for the purpose of Web indexing (web spidering)._ <br />
<strong> fonte: <a href="https://en.wikipedia.org/wiki/Web_crawler"><a href="https://en.wikipedia.org/wiki/Web_crawler">https://en.wikipedia.org/wiki/Web_crawler</a></a> </strong></p>
<p>Web crawler é mais famoso talvez pelo trabalho do Google. O &ldquo;crawler&rdquo; deles varre todas as paginas da Internet regularmente para saber como fazer as buscas mais relevantes para os usuários. O &ldquo;crawler&rdquo; realiza um &ldquo;scrape&rdquo; para coletar os dados do site e investigar eles.</p>
<p>O &ldquo;scrape&rdquo; é uma coleta de dados da pagina. Podemos coletar qualquer elemento das paginas pelos &ldquo;tags&rdquo; no HTML. O &ldquo;scrape&rdquo; pode ser usado para a coleta de dados que serão repostados em outros, como em um agregador de noticias. É importante lembrar que alguns sites não permitem que seus conteúdos sejam copiados e repostados em outros sites. Alem disso. Alguns site não permitem que sequer faça um &ldquo;crawl&rdquo; em suas paginas.</p>
<p>A operação de &ldquo;crawl&rdquo; consome recursos dos servidores das paginas acessadas. Por isso é necessário que haja uma certa etiqueta na operação. É boa pratica avisar que a pagina sera visitada e é bom seguir as recomendações da própria pagina. Também é importante lembrar que os servidores podem receber um numero limitados de conexões. Um crawler, se feito sem cuidado, pode acabar fazendo requisições demais e derrubando o servidor.</p>
<p>Neste exercício, criei um crawler para realizar um scrape dos links nas paginas dos professores da UALG. A operação se manterá dentro da pagina raiz, <a href="http://w3.ualg.pt/">http://w3.ualg.pt/</a>, onde temos autorização para realizar o projeto. Conforme o Crawl prossegue poderemos ver a quais sites as paginas pessoais dos professores ligam e o código ira vasculhar as paginas a dentro dos professores alem do &ldquo;index&rdquo; também.</p>
<hr />
<h2 id="livrarias"><a name="user-content-livrarias" href="#livrarias" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Livrarias</h2>
<p>Foi usado as livrarias &ldquo;threading&rdquo;, &ldquo;Queue&rdquo;, &ldquo;Time&rdquo;, &ldquo;Bealtiful Soup 4&rdquo; e &ldquo;Urllib&rdquo;.</p>
<p><strong> Threading:</strong><br />
Esta livraria facilita a divisão de memoria de um processo entre novas threads de processamento. Diferente do &ldquo;Multiprocessing&rdquo;, ele não criara novos processos para utilizar mais núcleos do processador. No entanto, apesar de usar um núcleo do processador apenas, podemos fazer melhor uso dele com este método. Enquanto um request espera resposta do servidor podemos fazer os outros requests e/ou processar os dados.</p>
<p><strong> Queue</strong><br />
Criamos uma fila de dados links por visitar. Com forme as linhas de processamento são criados, elas pegam o próximos link da fila até ela ser esvaziada. Uma vez vazia o código desliga.</p>
<p><strong> Time</strong><br />
A fila pode ficar sem links para acesso enquanto outras linhas estão coletando novos links e/ou esperando o servidor responder. Para evitar que uma linha seja encerrada antes da hora, colocamos um temporizador para esperar novas inserções.</p>
<p><strong> Urllib</strong><br />
Eu usei especificamente o modulo &ldquo;.request&rdquo;. Ele ajuda abrir a URL(http) e coletar os dados ali.</p>
<p><strong> Beaultiful Soup</strong><br />
Nos permite coletar dados de HTML. Podemos escolher um elemento do HTML, como a tag &ldquo;p&rdquo;, e puxar as informações dentro para salvar em strings. É possível ser mais especifico e buscar apenas tags &ldquo;p&rdquo; dentro de divisões, &ldquo;div&rdquo;, com uma classe especifica.</p>
<hr />
<h2 id="diagrama"><a name="user-content-diagrama" href="#diagrama" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Diagrama</h2>
<p><img alt="Diagrama" src="/home/dias/Documents/facu/SMA%20Relatorios/TP1/DiaCrawler.png" title="Diagrama" /></p>
<hr />
<h2 id="codigo"><a name="user-content-codigo" href="#codigo" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Código</h2>
<h5 id="lista-e-fila"><a name="user-content-lista-e-fila" href="#lista-e-fila" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Lista e fila</h5>
<p>Primeiro criamos a lista com os links já visitados. Conforme os links forem visitados eles são adicionados aqui. Uma checagem mais tarde ira impedir que os links sejam acessados de novo mais tarde.</p>
<p>Em segundo criamos a fila que sera populada com os links.</p>
<pre><code class="Python">    # Criando uma lista de paginas visitadas
    visitadas = []

    # Criando a &quot;Queue&quot;
    links_por_Visitar = Queue()
</code></pre>

<p>Colocaremos o link que queremos visitar primeiro. Esta pagina sera a principal root. O &ldquo;crawler&rdquo; não pesquisara paginas que não sejam raízes desta.</p>
<pre><code class="Python">    # Determina o root por onde o processo se inicia
    root = 'http://w3.ualg.pt/~paneves/'
    links_por_Visitar.put(root)
</code></pre>

<h5 id="threading"><a name="user-content-threading" href="#threading" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Threading</h5>
<p>Criamos os workers com o método &ldquo;Threading&rdquo;.</p>
<pre><code class="Python">    # Chamando os workers
    for i in range(10):
        sleep(2)
        threading.Thread(target=worker, args=()).start()

    links_por_Visitar.join()
</code></pre>

<h5 id="workers"><a name="user-content-workers" href="#workers" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Workers</h5>
<p>Os &ldquo;workers&rdquo; por sua vez irão verificar se a fila tem links por visitar, e os ira pegar para começar o trabalho. Se a fila estiver vazia eles irão esperar por 15 segundos e desligarão a conexão.</p>
<pre><code class="Python">def worker():
    counter = 3
    while counter &gt; 0:
        while not links_por_Visitar.empty():
            por_visitar = links_por_Visitar.get()
            if por_visitar not in visitadas:
                crawler(por_visitar)
                counter = 3
            links_por_Visitar.task_done()
        sleep(5)
        counter -= 1
</code></pre>

<h5 id="crawler"><a name="user-content-crawler" href="#crawler" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Crawler</h5>
<p>O Crawler em si. Aqui pegaremos a pagina raiz e extrairemos o HTML da URL e do HTML todos os links, &ldquo;href&rdquo;, de todas as tags &ldquo;a&rdquo;. Como alguns sites das paginas no site <a href="http://w3.ualg.pt/">http://w3.ualg.pt/</a> são antigos, foi necessário lidar com &ldquo;Frames&rdquo;, no HTML, para as paginas que usam. Os links novos são coletados e enviados para o validador e depois os dados são enviados para o &ldquo;writer&rdquo;.</p>
<pre><code class="Python">def crawler(new_root):
    visitadas.append(new_root)
    try:
        # Aqui pegaremos a pagina inteira
        source = urllib.request.urlopen(new_root).read()
        soup = bs.BeautifulSoup(source, 'lxml')

        new_links = []

        # Aqui pegaremos os links dentro das tags &quot;a&quot;
        new_links = [link.get('href') for link in soup.select('a')]

        # Alguns dos sites usam Frame.
        frames = [link.get('src') for link in soup.select('frame')]
        if frames:
            for frame in frames:
                if &quot;.htm&quot; not in new_root:
                    new_links.append(new_root + frame)

        try:
            title = soup.title.text
            print(title)
        except:
            pass

        print(new_links[:])
        print(visitadas)

        el_validator(new_root, new_links)

        writer(new_root, title, new_links)
</code></pre>

<h5 id="validacao-dos-links"><a name="user-content-validacao-dos-links" href="#validacao-dos-links" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Validação dos links</h5>
<p>O el_validator(), ira verificar se os links colhidos das &ldquo;href&rdquo; pelo HTML são links validos e os transforma em links que serão acessados mais tarde. Isto é feito somando o root com o link tirado do href. Se o link resultante não estiver na lista de links ja visitados ele será adicionado a fila.</p>
<pre><code class="Python">def el_validator(new_root, new_links):
    # o código ira checar os links para validação.
    for link in new_links:
        # Validação
        try:
            if new_root in link:
                if link not in visitadas:
                    links_por_Visitar.put(link)

            elif '/' == link[0]:
                # fix é uma solução que encontrei para evitar que repetição de links
                # Sem isto os links acabam se escrevendo site.com//link.html e depois site.com///link.html
                fix = new_root[:-1]
                if fix + link not in visitadas:
                    links_por_Visitar.put(fix + link)
            elif '#' == link[0]:
                if new_root + link not in visitadas:
                    links_por_Visitar.put(new_root + link)
            elif 'http' not in link and &quot;htm&quot; not in new_root:
                if new_root + link not in visitadas:
                    links_por_Visitar.put(new_root + link)
            elif 'http' not in link:
                if root + link not in visitadas:
                    links_por_Visitar.put(root + link)
            elif '..' in link:
                continue
            else:
                pass
        except Exception as e:
            # print(e)
            pass
</code></pre>

<h5 id="guardando-os-dados"><a name="user-content-guardando-os-dados" href="#guardando-os-dados" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Guardando os dados</h5>
<p>O método &ldquo;writer&rdquo; irá fazer uma inserção no arquivo, dataDump.txt, os dados coletados das paginas visitadas. Ele recebe os dados do &ldquo;crawler&rdquo; que serão escritos. O dados guardados são o titulo da pagina, extraído do header, o endereço URL e a lista de todos os links, &ldquo;href&rdquo;.</p>
<pre><code class="Python">def writer(new_root, title, new_links):
    file = open(&quot;dataDump.txt&quot;, &quot;a&quot;)
    file.write(new_root + &quot;\n\n&quot; + title + &quot;\n\n&quot; + '\n'.join(new_links) + &quot;\n\n\n&quot;)
    # file.write(new_root + &quot;\n&quot;)
    file.close()
</code></pre>

<hr />
<h2 id="resultados"><a name="user-content-resultados" href="#resultados" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Resultados</h2>
<p>Exemplo do &ldquo;scrape&rdquo; realizado no site de um dos professores para testar o código e analisar os links extraídos da pagina, <a href="http://w3.ualg.pt/~paneves/">http://w3.ualg.pt/~paneves/</a>, do professor Pedro Neves.</p>
<pre><code>    Here we go.


    http://w3.ualg.pt/~paneves/

    Pedro Neves website

    Linux%20on%20a%20Toshiba%20M30%20Laptop_en.html
    backplate_config.html
    Springstraps%20How%20TO.html
    http://www.ualg.pt/fcma/cmc
    http://validator.w3.org/check?uri=referer


    http://w3.ualg.pt/~paneves/Linux%20on%20a%20Toshiba%20M30%20Laptop_en.html

    Linux on a Toshiba M30 Laptop

    http://ipw2100.sourceforge.net/
    http://www.vicentgozalbes.com/files/toshiba/ipw2100-fw-1.3.tgz
    http://www.vicentgozalbes.com/files/toshiba/ipw2100-source_0.56-1_all.deb
    kernel_config
    fnfxrc
    http://www.linmodems.org
    http://www.debian.org/doc/manuals/debian-java-faq/
    https://sdlcweb2c.sun.com/ECom/EComActionServlet;jsessionid=CF21C8703D57FAC1337A914A6872F83C
    XF86Config-4
    kernel_config
    fnfxrc
    http://zzrough.free.fr/toshiba-m30.php
    http://www.vicentgozalbes.com/index.php?mod=new&amp;id=33
    http://www.uni-koblenz.de/%7Etenshi/tosh/
    http://www.kraus.tk/installnotes/toshiba-m30/toshiba-m30.htm
    http://newsletter.toshiba-tro.de/main/
    http://www.jeanpierre.de/m30/
    http://www.nosoftwarepatents.com/
    http://www.nosoftwarepatents.com/


    http://w3.ualg.pt/~paneves/backplate_config.html

    Backplate_config

    http://w3.ualg.pt/%7Epaneves/pieces.jpg
    backplatesteelpeq.JPG
    backplatealupeq.JPG
    cintapeq.jpg
    drings.jpg
    dringdobrado.JPG
    stop.JPG
    buckle.JPG
    bungee.jpg
    innertubepeq.jpg
    mcpak.jpg
    http://www.halcyon.net/mc/acb.shtml
    http://www.halcyon.net/manuals/halcyon_MC2003_web.pdf
    http://www.nosoftwarepatents.com


    http://w3.ualg.pt/~paneves/Springstraps%20How%20TO.html

    Springstraps How TO

    http://www.halcyon.net/acc/springheels.shtml
    http://www.mcmaster.com/

</code></pre>

<h5 id="tempo"><a name="user-content-tempo" href="#tempo" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Tempo</h5>
<p>O tempo gasto pelo &ldquo;crawler&rdquo;, é importante lembrar, tem sempre, pelo menos, 15 segundos adicionais. Pois cada &ldquo;thread&rdquo; de processamento espera 15 segundos para se certificar que a fila de links está realmente vazia e não sendo atualizada por outra operação.</p>
<p>O método usado foi &ldquo;Time&rdquo; do próprio Unix. Ele divide o tempo de 3 maneiras. Real é o tempo total usado, incluindo tempo esperando. User é apenas tempo em que o CPU esta sendo usado, não inclui espera. Por últimos, o Sys, é o tempo gasto acessando o Kernel da maquina, realizando tarefas com o hardware, alocando memoria, etc.</p>
<p>O site usado foi diferente do exemplo anterior. O site escolhido foi do professor Silvia Conceicao Pinto Brito Fernandes por possuir mais fragmentos para vasculhar.</p>
<p><strong> teste 1</strong><br />
O site, <a href="http://w3.ualg.pt/~sfernan/">http://w3.ualg.pt/~sfernan/</a>, vasculhado com 10 &ldquo;threads&rdquo;.<br />
<pre><code>$ time python3 Crawler2.py
real    1m11.825s
user    0m54.940s
sys 0m1.744s
</code></pre></p>
<p><strong> teste 2</strong><br />
O site, <a href="http://w3.ualg.pt/~sfernan/">http://w3.ualg.pt/~sfernan/</a>, vasculhado com 50 &ldquo;threads&rdquo;.<br />
<pre><code>$ time python3 Crawler2.py
real    1m57.268s
user    1m0.304s
sys 0m1.696s
</code></pre></p>
<p>Acredito que a razão pela discrepância de tempo &ldquo;real&rdquo; é o contador de tempo. Até todos os threads acabarem teremos de esperar pelo menos 15 segundos. Se um link for adicionado enquanto isso, o contador de reinicia.</p>
<p>A discrepância no tempo &ldquo;user&rdquo; acredito que seja o tempo gasto criando e apagando os &ldquo;threads&rdquo;. Mais &ldquo;threads&rdquo; significa mais trabalho para o algoritmo.</p>
<p>Para o &ldquo;sys&rdquo;, o tempo diminuiu, possivelmente por, naquele momento, possuir menos operações no sistema operacional.</p>
<h5 id="memoria"><a name="user-content-memoria" href="#memoria" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Memoria</h5>
<p>O consumo de memoria foi medido usando o método &ldquo;mprof&rdquo; da livraria &ldquo;memory profiler&rdquo;. Dados foram colhidos a cada 0.1 segundos o que influencia um pouco no tempo rodado pelo programa.</p>
<p><strong> teste 1</strong><br />
Consumo de memoria com 10 &ldquo;threads&rdquo;. O máximos alcançado foi 189.800781 Mbs de memoria.</p>
<p><img alt="mem10thread" src="/home/dias/Documents/facu/SMA%20Relatorios/TP1/mem10thread.png" /></p>
<p><strong> teste 2</strong><br />
Consumo de memoria com 10 &ldquo;threads&rdquo;. O máximo alcançado foi 189.742188 Mbs de memoria. A maior diferença no entanto, como pode ser visto no gráfico, foi o tempo gasto.</p>
<p><img alt="mem50thread" src="/home/dias/Documents/facu/SMA%20Relatorios/TP1/mem50thread.png" /></p>
<h5 id="configuracao-de-sistema"><a name="user-content-configuracao-de-sistema" href="#configuracao-de-sistema" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Configuração de sistema</h5>
<p>Esta é a configuração de sistema, hardware e software, usados para os testes.</p>
<pre><code>Memoria:  7,7 GiB
Processador: Intel® Core™ i7-3537U CPU @ 2.00GHz × 4
Graphics: Intel® Ivybridge Mobile 
OS: Ubuntu 16.04 LTS 64-bit
Disk: 729,9 GB, HD SATA
</code></pre>

<hr />
<h2 id="consideracoes-finais-e-projetos-futuros"><a name="user-content-consideracoes-finais-e-projetos-futuros" href="#consideracoes-finais-e-projetos-futuros" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Considerações finais e projetos futuros</h2>
<p>Muitos das paginas dos professores estão desatualizadas e ainda utilizam XHTML ou HTML 4.1, ou ainda 4.0. Isso torna o processo de &ldquo;crawl&rdquo; e &ldquo;scrape&rdquo; mais difícil pois não existe uma metodologia comum entre todas as paginas.</p>
<p>Isto no entanto pode ser algo positivo. Muito da internet não está atualizado e não segue uma forma comum em nomenclatura para classes de elementos de HTML. Criando um &ldquo;crawler&rdquo; que consegue se adaptar e vasculhar os sites da internet, novos e antigos, teremos uma ferramenta mais robusta para estudar a própria internet e os conteúdos dela.</p>
<hr />
<h2 id="bibliografia"><a name="user-content-bibliografia" href="#bibliografia" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Bibliografia</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Web_crawler">https://en.wikipedia.org/wiki/Web_crawler</a></li>
<li><a href="https://docs.python.org/2/library/urllib.html">https://docs.python.org/2/library/urllib.html</a></li>
<li><a href="https://docs.python.org/3/howto/urllib2.html">https://docs.python.org/3/howto/urllib2.html</a></li>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/">https://www.crummy.com/software/BeautifulSoup/bs4/doc/</a></li>
<li><a href="https://docs.python.org/3/library/threading.html">https://docs.python.org/3/library/threading.html</a></li>
<li><a href="https://docs.python.org/3/library/asyncio-queue.html">https://docs.python.org/3/library/asyncio-queue.html</a></li>
<li><a href="https://docs.python.org/3/library/time.html">https://docs.python.org/3/library/time.html</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/python">https://stackoverflow.com/questions/tagged/python</a></li>
<li><a href="https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1">https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1</a></li>
<li><a href="https://www.huyng.com/posts/python-performance-analysis">https://www.huyng.com/posts/python-performance-analysis</a></li>
<li><a href="https://pypi.python.org/pypi/memory_profiler">https://pypi.python.org/pypi/memory_profiler</a></li>
<li><a href="https://unix.stackexchange.com/questions/40694/why-real-time-can-be-lower-than-user-time">https://unix.stackexchange.com/questions/40694/why-real-time-can-be-lower-than-user-time</a></li>
</ul>
<hr />
<h2 id="codigo-inteiro"><a name="user-content-codigo-inteiro" href="#codigo-inteiro" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Código inteiro</h2>
<pre><code class="Python">import threading
from queue import Queue
from time import sleep

import bs4 as bs
import urllib.request



def crawler(new_root):
    visitadas.append(new_root)
    try:
        # Aqui pegaremos a pagina inteira
        source = urllib.request.urlopen(new_root).read()
        soup = bs.BeautifulSoup(source, 'lxml')

        new_links = []

        # Aqui pegaremos os links dentro das tags &quot;a&quot;
        new_links = [link.get('href') for link in soup.select('a')]

        # Alguns dos sites usam Frame.
        frames = [link.get('src') for link in soup.select('frame')]
        if frames:
            for frame in frames:
                if &quot;.htm&quot; not in new_root:
                    new_links.append(new_root + frame)

        try:
            title = soup.title.text
            print(title)
        except:
            pass

        print(new_links[:])
        print(visitadas)

        el_validator(new_root, new_links)

        writer(new_root, title, new_links)

    except Exception as e:
        # print(e)
        pass


def el_validator(new_root, new_links):
    # o codigo ira checar os links para validação.
    for link in new_links:
        # Validação
        try:
            if new_root in link:
                if link not in visitadas:
                    links_por_Visitar.put(link)

            elif '/' == link[0]:
                # fix é uma solução que encontrei para evitar que repetição de links
                # Sem isto os links acabam se escrevendo site.com//link.html e depois site.com///link.html
                fix = new_root[:-1]
                if fix + link not in visitadas:
                    links_por_Visitar.put(fix + link)
            elif '#' == link[0]:
                if new_root + link not in visitadas:
                    links_por_Visitar.put(new_root + link)
            elif 'http' not in link and &quot;htm&quot; not in new_root:
                if new_root + link not in visitadas:
                    links_por_Visitar.put(new_root + link)
            elif 'http' not in link:
                if root + link not in visitadas:
                    links_por_Visitar.put(root + link)
            elif '..' in link:
                continue
            else:
                pass
        except Exception as e:
            # print(e)
            pass



def writer(new_root, title, new_links):
    file = open(&quot;dataDump.txt&quot;, &quot;a&quot;)
    file.write(new_root + &quot;\n\n&quot; + title + &quot;\n\n&quot; + '\n'.join(new_links) + &quot;\n\n\n&quot;)
    # file.write(new_root + &quot;\n&quot;)
    file.close()


def worker():
    counter = 3
    while counter &gt; 0:
        while not links_por_Visitar.empty():
            por_visitar = links_por_Visitar.get()
            if por_visitar not in visitadas:
                crawler(por_visitar)
                counter = 3
            links_por_Visitar.task_done()
        sleep(5)
        counter -= 1


if __name__ == &quot;__main__&quot;:

    # Craindo uma lista de paginas visitadas
    visitadas = []

    # Criando a &quot;Queue&quot;
    links_por_Visitar = Queue()

    # Determina o root por onde o processo se inicia
    # root = 'http://w3.ualg.pt/'
    root = 'http://w3.ualg.pt/~paneves/'
    # root = 'http://w3.ualg.pt/~aferreir/'
    links_por_Visitar.put(root)

    # Criamos o arquivo para guardar os dados
    file = open(&quot;dataDump.txt&quot;, &quot;w&quot;)
    file.write(&quot;Here we go.\n\n\n&quot;)
    # Fechamos o arquivo
    file.close()

    # Chamando os workers
    for i in range(10):
        sleep(2)
        threading.Thread(target=worker, args=()).start()

    links_por_Visitar.join()
</code></pre></article></body></html>